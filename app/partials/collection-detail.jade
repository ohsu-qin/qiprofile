extends ../layout/partial

block billboard
  | {{ collection }} Summary

block content
  // TODO - wrap these charts in a panel?
  div.qi-correlation-charts(qi-correlation-charts)
  .row
    .col-md-6(ng-repeat="chart in charts")
      .row.qi-axis-dropdowns
        .col-md-4.col-md-offset-1
          .qi-dropdown.qi-x-axis-dropdown
            button.qi-dropbtn
              span.qi-dropdown-icon.qi-xy X
              span {{ choices[chart.x] }}
              span.qi-caret.caret
            .qi-dropdown-content
              .qi-dropdown-choice(
                ng-repeat="(key,val) in choices"
                ng-model="charts[$parent.$index].x"
                ng-click="charts[$parent.$index].x=key"
                )
                span.qi-dropdown-icon.qi-check-hide(
                  ng-show="val!=choices[chart.x]"
                  ) &#10003;
                span.qi-dropdown-icon.qi-check-show(
                  ng-show="val==choices[chart.x]"
                  ) &#10003;
                span.qi-dropdown-text {{ val }}
        .col-md-4
          .qi-dropdown.qi-y-axis-dropdown
            button.qi-dropbtn
              span.qi-dropdown-icon.qi-xy Y
              span {{ choices[chart.y] }}
              span.qi-caret.caret
            .qi-dropdown-content
              .qi-dropdown-choice(
                ng-repeat="(key,val) in choices"
                ng-model="charts[$parent.$index].y"
                ng-click="charts[$parent.$index].y=key"
                )
                span.qi-dropdown-icon.qi-check-hide(
                  ng-show="val!=choices[chart.y]"
                  ) &#10003;
                span.qi-dropdown-icon.qi-check-show(
                  ng-show="val==choices[chart.y]"
                  ) &#10003;
                span.qi-dropdown-text {{ val }}
      .row   
        .col-md-12.qi-correlation-chart(id="qi-correlation-chart-{{ $index }}")

block help-text
  // The nested quote ensures evaluation to a string rather than
  // a scope variable.
  .qi-help-text(ng-include="'/partials/help/subject-list.html'")
